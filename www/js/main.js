!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}Object.defineProperty(t,"__esModule",{value:!0});var i={getBoxCells:function(e,t){for(var r=3*Math.floor(t/3),n=3*Math.floor(t%3),a=[],o=0;o<9;o++){var i=r+Math.floor(o/3),u=n+o%3;a.push(e[i][u])}return a},covertToBoxIndex:function(e,t){return{boxIndex:3*Math.floor(e/3)+Math.floor(t/3),cellIndex:e%3*3+t%3}},coverFromBoxIndex:function(e,t){return{rowIndex:3*Math.floor(e/3)+Math.floor(t/3),colIndex:e%3*3+t%3}}},u=function(){function e(){n(this,e)}return o(e,null,[{key:"makeRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Array(9);return t.fill(e),t}},{key:"makeMatrix",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Array.from({length:9},function(){return e.makeRow(t)})}},{key:"shuffle",value:function(e){for(var t=e.length-2,r=0;r<t;r++){var n=r+Math.floor(Math.random()*(e.length-r)),a=[e[r],e[n]];e[n]=a[0],e[r]=a[1]}return e}},{key:"checkFillable",value:function(e,t,r,n){for(var a=e[r],o=e.map(function(t,r){return e[r][n]}),u=i.covertToBoxIndex(r,n).boxIndex,l=i.getBoxCells(e,u),c=0;c<9;c++)if(a[c]===t||o[c]===t||l[c]===t)return!1;return!0}}]),e}(),l=function(){function e(){n(this,e)}return o(e,null,[{key:"getMatrix",get:function(){return u}},{key:"getBoxToolkit",get:function(){return i}}]),e}();t.Toolkit=l,t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),a=r(6),o=new n.Grid($("#container")),i=new a.PopupNumber($("#popupNumbers"));o.build(),o.layout(),o.bindPopup(i),$("#check").on("click",function(e){o.check()}),$("#reset").on("click",function(e){o.reset()}),$("#clear").on("click",function(e){o.clear()}),$("#rebuild").on("click",function(e){o.rebuild()})},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=r(5),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._$container=t}var t,r,i;return t=e,(r=[{key:"build",value:function(){var e=new a.Suduku;e.make();var t=e.puzzleMatrix,r=["row_g_top","row_g_middle","row_g_bottom"],n=["col_g_left","col_g_center","col_g_right"],o=t.map(function(e){return e.map(function(e,t){return $("<span>").addClass(n[t%3]).addClass(e?"fixed":"empty").text(e)})}).map(function(e,t){return $('<div class="row">').addClass(r[t%3]).append(e)});this._$container.append(o)}},{key:"layout",value:function(){var e=$("span:first",this._$container).width();$("span",this._$container).height(e).css({"line-height":"".concat(e,"px"),"font-size":e<32?"".concat(e/2,"px"):""})}},{key:"bindPopup",value:function(e){this._$container.on("click","span",function(t){var r=$(t.target);r.is(".fixed")||e.popup(r)})}},{key:"check",value:function(){var e;e=this._$container.children().map(function(e,t){return $(t).children().map(function(e,t){return parseInt($(t).text(),10)||0})}).toArray().map(function(e){return e.toArray()});var t=new o.Checker(e);if(t.check(),t.isSuccess)alert("验证成功");else{var r=t.marks;this._$container.children().each(function(e,t){$(t).children().each(function(t,n){$(n).is(".fixed")||r[e][t]?$(n).removeClass("error"):r[e][t]||$(n).addClass("error")})})}}},{key:"clear",value:function(){this._$container.find("span.error").removeClass("error")}},{key:"reset",value:function(){this._$container.find("span:not('.fixed')").removeClass("mark1 mark2 error").addClass("empty").text(0)}},{key:"rebuild",value:function(){this._$container.empty(),this.build(),this.layout()}}])&&n(t.prototype,r),i&&n(t,i),e}();t.Grid=i,t.default=i},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=new a.Generator;t.generator(),this._solutionMatrix=t.matrix}var t,r,o;return t=e,(r=[{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this._puzzleMatrix=this._solutionMatrix.map(function(t){return t.map(function(t){return 9*Math.random()<e?0:t})})}},{key:"puzzleMatrix",get:function(){return this._puzzleMatrix}}])&&n(t.prototype,r),o&&n(t,o),e}();t.Suduku=o,t.default=o},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"generator",value:function(){for(;!this.internalGenerator(););}},{key:"internalGenerator",value:function(){this._matrix=a.Toolkit.getMatrix.makeMatrix(),this.orders=a.Toolkit.getMatrix.makeMatrix().map(function(e){return e.map(function(e,t){return t})}).map(function(e){return a.Toolkit.getMatrix.shuffle(e)});for(var e=1;e<=9;e++)if(!this.fillNumber(e))return!1;return!0}},{key:"fillNumber",value:function(e){return this.fillRow(e,0)}},{key:"fillRow",value:function(e,t){if(t>8)return!0;for(var r=this.matrix[t],n=this.orders[t],o=0;o<r.length;o++){var i=n[o];if(!r[i]&&a.Toolkit.getMatrix.checkFillable(this.matrix,e,t,i)){if(r[i]=e,this.fillRow(e,t+1))return!0;r[i]=0}}return!1}},{key:"matrix",get:function(){return this._matrix}}])&&n(t.prototype,r),o&&n(t,o),e}();t.Generator=o,t.default=o},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){var t=e.length,r=new Array(t);r.fill(!0);for(var n=0;n<t;n++)if(r[n]){var a=e[n];if(0===a||a<1||a>9)r[n]=!1;else for(var o=n+1;o<t;o++)e[o]!==a||(r[n]=r[o]=!1)}return r}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._success=!1,this._matrix=t,this._marks=o.Toolkit.getMatrix.makeMatrix(!0)}var t,r,i;return t=e,(r=[{key:"check",value:function(){return this.checkRow(),this.checkCol(),this.checkBox(),this._success=this._matrix.every(function(e){return e.every(function(e){return Boolean(e)})}),this._success}},{key:"checkRow",value:function(){for(var e=0,t=this._matrix.length;e<t;e++)for(var r=a(this._matrix[e]),n=0;n<r.length;n++)r[n]||(this._marks[e][n]=!1)}},{key:"checkCol",value:function(){for(var e=this,t=function(t,r){for(var n=a(e._matrix.map(function(r,n){return e._matrix[n][t]})),o=0,i=n.length;o<i;o++)n[o]||(e._marks[o][t]=!1)},r=0,n=this._matrix.length;r<n;r++)t(r)}},{key:"checkBox",value:function(){for(var e=0,t=this._matrix.length;e<t;e++)for(var r=a(o.Toolkit.getBoxToolkit.getBoxCells(this._matrix,e)),n=0,i=r.length;n<i;n++)if(!r[n]){var u=o.Toolkit.getBoxToolkit.coverFromBoxIndex(e,n),l=u.rowIndex,c=u.colIndex;this._marks[l][c]=!1}}},{key:"marks",get:function(){return this._marks}},{key:"isSuccess",get:function(){return this._success}}])&&n(t.prototype,r),i&&n(t,i),e}();t.Checker=i,t.default=i},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._$panel=t.hide().removeClass("hidden"),this._$panel.on("click","span",function(e){var t=r._$cell,n=$(e.target);n.hasClass("mark1")?(t.hasClass("mark2")&&t.removeClass("mark2"),t.hasClass("mark1")||t.addClass("mark1"),t.addClass("mark1")):n.hasClass("mark2")?(t.hasClass("mark1")&&t.removeClass("mark1"),t.hasClass("mark2")||t.addClass("mark2"),t.addClass("mark2")):n.hasClass("empty")?(t.hasClass("mark1")&&t.removeClass("mark1"),t.hasClass("mark2")&&t.removeClass("mark2"),t.text(0).addClass("empty")):t.removeClass("empty").text(n.text()),r._$panel.hide()})}var t,r,a;return t=e,(r=[{key:"popup",value:function(e){this._$cell=e;var t=e.position(),r=t.left,n=t.top;this._$panel.css({left:"".concat(r,"px"),top:"".concat(n,"px")}).show()}}])&&n(t.prototype,r),a&&n(t,a),e}();t.PopupNumber=a,t.default=a}]);
//# sourceMappingURL=main.js.map